中国儿童戏剧网站后台文档

一、用户模块
	1. 用户注册            
		请求方式:     POST
		请求url：      /user/register
		
		请求参数:    
			          username	 	用户名		
			          email			邮箱			邮箱格式
			          password 		密码			长度为6-20的字母和数字组成的字符串
			          re_passowrd		确认密码		长度为6-20的字母和数字组成的字符串

		返回参数：  
				{
					errCode:xxx,			错误码	0表示返回正常	 
					message:xxx			提示信息
				}

	2. 用户登录
	2.1 更换验证码
	           请求方式:     GET
	           请求url:	/user/captcha

	           请求参数:      

	           返回参数:      验证码图片

	2.2 验证验证码
		请求方式:	POST
		请求url:         /user/check_captcha
		
		请求参数:     captcha

		返回参数:	
				{
					errCode:xxx,			错误码	0表示返回正常	 
					message:xxx			提示信息
				}
	2.3 用户登录
		请求方式;     POST
		请求url:         /user/login

		请求参数:
				username		用户名	字符串
				password		密码		长度为6-20的字母和数字组成的字符串		  
				captcha		验证码	长度为5的字符串
		

		返回参数:	
				{
					errCode:xxx,			错误码	0表示返回正常	 
					message:xxx			提示信息
				}

二、在线报名模块
	1. 成绩查询
		请求方式:	POST
		请求url:	/user/score_inquiry

		请求参数:
				scorenumber		编号		string
				name			姓名		string

		返回参数:
				{
					errCode:xxx,			错误码	0表示返回正常	 
					message:xxx			提示信息
				},
				application:[		报名表对象	正常返回时返回此对象
					  name:xxx,			名字
					  scorenumber:xxx,		编号
					  score:xxx			分数
				]

		备注:		登录可操作

	2. 在线报名
		请求方式:	POST
		请求url:	/user/ application

		请求参数:
				name			姓名		string(必填字段)
				gender		性别		boolean类型,0男,1女;2表示未知
				year			出生年	integer
				month			出生月	integer
				day			出生日	integer
				hometown		籍贯		string
				address		居住地址	string
				guardian		监护人	string
				phone			手机		string(必填字段)
				unit			单位		string
				position		职务 		string
				QQ			QQ		string
				school			所在学校	string
				postcode		邮编		string
				trainingunit		京剧培训单位string
				profession		行当		string
				timeoflearn		学戏时间	string
				details			详细说明	text

		返回参数:
				{
					errCode:xxx,			错误码	0表示返回正常	 
					message:xxx			提示信息
				}
		
		备注:登录可操作

三、个人中心模块
	1.空间首页
		请求方式:	GET
		请求url:	/user/space_home/:user_id

		请求参数:	user_id		被访问用户id		根据id去到首页

		返回参数:	视图
				realname		真实姓名
				city			所在城市
				gender		性别
				per_description	我的简介

				albums:[		包含两个相册的数组
					{
					album_title1,			相册1的名称
					number_of_pictures1,	相册1的图片数
					picture1			相册1的封面图片
					},
					{
					album_title2,			相册2的名称
					number_of_pictures3,	相册2的图片数
					picture2			相册2的封面图片			
					}
				]

				topics:[		包含两个话题的数组
					{
					topic_title1,			话题1的名称
					topic_time1,			话题1的创建时间
					topic_content1,		话题1的内容
					$topic_comments1		话题1的评论数
					},
					{
					topic_title2,			话题2的名称
					topic_time2,			话题2的创建时间
					topic_content2,		话题2的内容
					$topic_comments2		话题2的评论数
					}
				]			


	2.话题动态
		请求方式:	GET
		请求url:	/user/topic/:user_id

		请求参数:	user_id	被访问用户id			根据id获取话题动态

		返回参数:	视图
				topics:[
					{
						title:xxx,			话题题目
						topic:xxx,			话题内容
						created_at:xxx,		话题建立时间
						commentsCount:xxx		话题评论数
					},
					....
				]


	3.相册
		请求方式:	GET
		请求url:	/user/album/:user_id

		请求参数:	user_id	被访问用户id			根据id获取相册

		返回参数:	视图
				albums:[
					{
						title:xxx,			相册题目
						picture:xxx,			相册封面
						albumCount:xxx		相册图片数目
						},
						....
				]

	4.照片
		请求方式:	GET
		请求url:	/user/picture/:album_id

		请求参数:	album_id	相册的id			根据id取得图片实例

		返回参数:	视图
				pictures:[
					{
						title:xxx,			图片标题
						picture:xxx			图片的url
					},
					....
				]
	5. 留言
		请求方式:	GET
		请求url:	/user/message/:user_id

		请求参数:	user_id	被访问用户id			根据用户id获取留言

		返回参数:	视图
				messages:[
					 {
						username:xxx,			留言人姓名
						created_at:xxx,			留言时间
						content:xxx,				留言内容
						messageCommentCount:xxx	留言的回复数
					},
					....
				]

	6.留言的回复
		请求方式:	GET
		请求url:	/user/message_comment/:message_id

		请求参数:	message_id

		返回参数:	
				message_comments:[
					{
						username:xxx,			回复者姓名
						content:xxx,				回复内容
						created_at:xxx			回复时间
					},
					....
				]

	7.获取个人资料
		请求方式:	GET
		请求url:	/user/update/:user_id

		请求参数:	user_id

		返回参数:	视图
				user:{	
						avatar:xxx,			头像
						realname:xxx,		真实姓名
						gender:xxx,			性别
						position:xxx,			职位
						city:xxx,			所在城市
						interests:xxx,			兴趣
						per_description:xxx		我的简介
				}
	8.发表留言
		请求方式:	POST
		请求url:	/user/personal/message

		请求参数:	
				receiver_id					被留言者id
				message_content				留言内容

		返回参数:	
				{
					errCode:xxx,			错误码	0表示返回正常	 
					message:xxx			提示信息
				},
				msg:{
						avatar:xxx,			头像
						username:xxx,		留言者姓名
						content:xxx,			内容
						created_at			留言时间
				}
		备注:登录可操作

	9.发表回复
		请求方式:	POST
		请求url:	/user/personal/message_comment

		请求参数:	
				message_id					被回复的留言的id
				comment_content				回复内容

		返回参数:	
			{
				errCode:xxx,			错误码	0表示返回正常	 
				comment:{
						avatar:xxx,			头像
						username:xxx,		回复者姓名
						content:xxx,			内容
						created_at			回复时间
				}
			}

	10.更新个人资料
		请求方式:	POST
		请求url:	/user/personal/update

		请求参数:	
				realname:xxx,		真实姓名
				gender:xxx,			性别
				position:xxx,			职位
				city:xxx,			所在城市
				interests:xxx,			兴趣
				per_description:xxx		我的简介

		返回参数:
			{
				errCode:xxx,			错误码	0表示返回正常	 
				message:xxx			提示信息
			}

	11.更换头像
		请求方式:	POST
		请求url:	/user/personal/chang_image

		请求参数:
				avatar				头像图片

		返回参数:
			{
				errCode:xxx,			错误码	0表示返回正常	 
				message:xxx			提示信息
			}



